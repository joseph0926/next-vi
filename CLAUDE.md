# CLAUDE.md

## Repository Working Agreement

새 기능 구현은 아래 3단계 문서 흐름으로 진행한다.

공통 근거 탐색 규칙:

- 근거를 현재 저장소/합의 문서 범위에서 찾지 못한다고 판단되면 웹검색을 활용한다.
- 웹검색으로 확보한 근거는 답변/문서에 출처와 함께 명시한다.

1. RFC 단계
- 사용자와 QnA로 요구사항/범위/수용기준을 확정한다.
- 경로: `docs/rfcs/<주제>.md`
- 사용자가 `docs/rfc/<주제>.md`라고 요청해도 동일 단계로 취급한다.
- RFC 문서 초안/보완의 마지막에는 사용자와 QnA를 반드시 수행한다.
- 질문 입력 포맷: 사용자가 `*.md` 문서에 `<!-- @Q. <질문> -->` 주석으로 남긴다.
- 처리 규칙: 에이전트는 해당 질문에 대해 채팅으로 먼저 답변하고, RFC 문서 보완 시 QnA를 문서에 그대로 작성한다(사용자 오타/띄어쓰기만 교정 가능).

2. Plan 단계
- RFC 확정 후 구현 계획을 구체화한다.
- 경로: `docs/plan/<주제>.md`
- Plan 문서 초안/보완의 마지막에는 사용자와 QnA를 반드시 수행한다.
- 질문 입력 포맷: 사용자가 `*.md` 문서에 `<!-- @Q. <질문> -->` 주석으로 남긴다.
- 처리 규칙: 에이전트는 해당 질문에 대해 채팅으로 먼저 답변하고, Plan 문서 보완 시 QnA를 문서에 그대로 작성한다(사용자 오타/띄어쓰기만 교정 가능).

3. Implementation 단계
- Plan 확정 후 구현하고 결과를 기록한다.
- 구현 근거(중요): 선택한 방식의 이유, 제약, 트레이드오프를 반드시 명시한다.
- 경로: `docs/impl/<주제>.md`
- 구현 문서 초안/보완의 마지막에는 사용자와 QnA를 반드시 수행한다.
- 질문 입력 포맷: 사용자가 `*.md` 문서에 `<!-- @Q. <질문> -->` 주석으로 남긴다.
- 처리 규칙: 에이전트는 해당 질문에 대해 채팅으로 먼저 답변하고, 문서 보완 시 QnA를 문서에 그대로 작성한다(사용자 오타/띄어쓰기만 교정 가능).

## Completed Docs Rule

- 문서 첫 줄이 `<!-- AI_STATUS: COMPLETED -->`면 완료로 간주한다.
- 완료 문서는 명시적 수정 요청이 없으면 다른 AI는 추가 분석 없이 early return 한다.
